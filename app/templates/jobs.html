{% extends 'base.html' %}{% block content %}
<h1>Jobs</h1>
<div id='list'>Loading...</div>
<script>
(function(){
  fetch('/api/jobs').then(function(r){return r.json()}).then(function(arr){
    var html=''; 
    for(var i=0;i<arr.length;i++){
      var j=arr[i];
      var must=(j.must_have_skills||[]).map(function(s){return '<span class=\"badge\">'+s+'</span>'}).join(' ');
      var nice=(j.nice_to_have_skills||[]).map(function(s){return '<span class=\"badge\">'+s+'</span>'}).join(' ');
      html+=
        '<div class=\"card\">'+
          '<div style=\"display:flex;justify-content:space-between;gap:8px;align-items:center;\">'+
            '<div><b>'+(j.title||'')+'</b> <span class=\"small\">/ '+(j.company||'')+'</span></div>'+
            '<div class=\"small\">ID: '+j.id+'</div>'+
          '</div>'+
          '<div class=\"kv\" style=\"margin-top:8px\">'+
            '<div>勤務地: '+(j.location||'')+'</div>'+
            '<div>雇用: '+(j.employment_type||'')+'</div>'+
            '<div>年収: '+((j.min_salary||0))+'〜'+((j.max_salary||0))+' 万円</div>'+
          '</div>'+
          '<div style=\"margin-top:10px\"><div class=\"small\">必須</div><div>'+ (must||'<span class=\"small\">（未設定）</span>') +'</div></div>'+
          '<div style=\"margin-top:8px\"><div class=\"small\">歓迎</div><div>'+ (nice||'<span class=\"small\">（未設定）</span>') +'</div></div>'+
        '</div>';
    }
    document.getElementById('list').innerHTML=html;
  }).catch(function(e){
    document.getElementById('list').textContent='読み込みエラー: '+e;
    console.error(e);
  });
})();
</script>
{% endblock %}
